# Expert Review Instructions

## Overview

You are reviewing code generated by large language models (LLMs) for estimating the time-varying reproduction number (Rt) from epidemic data. Your task is to assess the **epidemiological and statistical correctness** of each submission, regardless of whether the code actually runs.

**Important**: You are blinded to which LLM generated the code and which programming condition was used. Please do not attempt to identify these.

## Reference Solution

The reference approach uses the **renewal equation** framework:

### Infection Process
$$I_t = R_t \sum_{s=1}^{S} I_{t-s} \cdot g_s$$

Where:
- $I_t$ = infections at time $t$
- $R_t$ = instantaneous reproduction number
- $g_s$ = generation interval PMF

### Observation Process
$$\mathbb{E}[C_t] = \alpha_t \sum_{d=0}^{D} I_{t-d} \cdot f_d$$

Where:
- $C_t$ = observed cases
- $\alpha_t$ = ascertainment rate
- $f_d$ = delay PMF

### Observation Model
$$C_t \sim \text{NegBin}(\mu = \mathbb{E}[C_t], \phi)$$

### Rt Smoothness
Acceptable approaches include:
- AR(1): $\log R_t = \rho \log R_{t-1} + \epsilon_t$
- Random walk: $\log R_t = \log R_{t-1} + \epsilon_t$
- Gaussian process
- Splines

## Departure Categories

When counting departures, classify each into one of these categories:

| Category | Definition | Examples |
|----------|------------|----------|
| **(A) Equivalent alternative** | Different but equally valid | GP instead of AR(1) for Rt smoothness; different parameterisation of same distribution |
| **(B) Minor error** | Small mistake, unlikely to substantially affect results | Slightly off generation interval mean (e.g., 4 vs 5 days); missing day-of-week adjustment |
| **(C) Major error** | Significant mistake that would bias results | No delay convolution; Poisson instead of NegBin with overdispersed data; overly tight priors |
| **(D) Fundamental misunderstanding** | Indicates lack of understanding | Naive ratio method; negative Rt values possible; confusing Rt with growth rate |

## Overall Assessment

Based on your departure counts:

| Rating | Criteria |
|--------|----------|
| **acceptable** | No C or D departures; would produce reasonable Rt estimates |
| **minor** | Only A and B departures; results would be slightly suboptimal |
| **major** | One or more C departures; results would be biased |
| **incorrect** | One or more D departures; fundamental misunderstanding |

## How to Review

1. **Open the spreadsheet**: Download `scoresheet.csv` and open in Excel or Google Sheets
2. **Open the code**: View `all_code.md` alongside (GitHub renders it, or open locally)
3. **For each row**: Find the matching submission ID in all_code.md, review the code, fill in the columns
4. **Return the completed spreadsheet** when done

### Column Dictionary

#### Pre-filled columns (do not edit)

| Column | Description |
|--------|-------------|
| `submission_id` | Unique identifier (e.g., SUB_042). Match to heading in all_code.md. |
| `scenario` | Which scenario: 1a, 1b, 2, or 3. See Scenario Descriptions below. |
| `execution` | Whether the code ran: SUCCESS (produced output), FAILED (error), or TIMEOUT (exceeded 10 min). |

#### Method identification (Scenario 1a only)

| Column | Description |
|--------|-------------|
| `method_1a_only` | Which Rt estimation method was used? Leave blank for scenarios 1b/2/3. |

Valid values:
- `renewal` - Renewal equation / Cori method / EpiEstim-style (recommended)
- `wallinga` - Wallinga-Teunis case reproduction number (acceptable)
- `bettencourt` - Bettencourt-Ribeiro SIR-based method (not recommended)
- `naive` - Simple ratio like Ct/Ct-1 (not acceptable)
- `other` - Describe in notes column

#### Departures from reference

Each common departure has its own column. Mark `x` if present, leave blank if not. Use `other_departures` for anything not covered below.

##### `no_delay`
No delay distribution between infection and reporting. Cases are treated as if observed immediately upon infection.

##### `no_gi`
No generation interval or serial interval specified. The model doesn't account for the time between successive infections.

##### `fixed_gi`
Generation interval is hardcoded as a fixed value without uncertainty. Should be a distribution to propagate uncertainty.

##### `wrong_gi`
Generation interval value is implausible for COVID-19 (should be ~3-7 days mean).

##### `si_not_gi`
Uses serial interval instead of generation interval without accounting for the difference. SI includes incubation periods and can bias Rt estimates.

##### `poisson`
Uses Poisson instead of Negative Binomial observation model. Poisson assumes mean equals variance, which underestimates uncertainty for overdispersed case data.

##### `no_convolution`
Missing convolution in renewal equation. Infections should be convolved with the generation interval to get expected new infections.

##### `no_smoothing`
No Rt smoothing or regularisation. Rt should have temporal structure (random walk, AR(1), GP, splines) rather than being independent at each time point.

##### `negative_rt`
Prior or model structure allows negative Rt values, which are epidemiologically impossible.

##### `no_uncertainty`
Point estimates only, no credible or confidence intervals provided for Rt.

##### `wrong_likelihood`
Incorrect likelihood specification (e.g., Gaussian for count data, wrong link function).

##### `confused_rt_r`
Confuses instantaneous reproduction number Rt with exponential growth rate r. These are related but distinct quantities.

##### `other_departures`
Free text for any departures not covered above.
| `count_A_equivalent` | Count of category A departures (different but equally valid approaches) |
| `count_B_minor` | Count of category B departures (small mistakes, unlikely to substantially affect results) |
| `count_C_major` | Count of category C departures (significant mistakes that would bias results) |
| `count_D_fundamental` | Count of category D departures (fundamental misunderstanding of the method) |

#### Overall assessment

| Column | Description |
|--------|-------------|
| `overall` | Summary judgement based on departure counts. |

Valid values:
- `acceptable` - No C or D departures; would produce reasonable Rt estimates
- `minor` - Only A and B departures; results would be slightly suboptimal
- `major` - One or more C departures; results would be biased
- `incorrect` - One or more D departures; fundamental misunderstanding

#### Additional criteria

| Column | Description |
|--------|-------------|
| `uncertainty_quantified` | Does the model provide credible/confidence intervals for Rt? (`yes` / `no`) |
| `appropriate_parameters` | Are generation interval (~3-7 days) and delay (~2-7 days) reasonable for COVID-19? (`yes` / `no` / `na` if not applicable) |
| `proper_discretisation` | Is continuous-to-discrete time conversion handled appropriately? (`yes` / `no` / `na` if not applicable) |
| `notes` | Any additional comments, clarifications, or uncertainties about your assessment. |

## Scenario Descriptions

### Scenario 1a - Open Method
"Estimate the time-varying reproduction number (Rt) from daily case counts."
- Assess method choice as well as implementation

### Scenario 1b - Renewal Equation Specified
"Estimate Rt using the renewal equation framework."
- Method is specified; assess implementation only

### Scenario 2 - Complex Model
"Estimate Rt accounting for day-of-week effects, time-varying ascertainment, and negative binomial observation noise."
- Assess whether all components are present and correctly implemented

### Scenario 3 - Multiple Data Streams
"Joint model of cases, hospitalisations, and deaths with stream-specific delays and shared Rt."
- Assess multi-stream handling and shared parameter structure

## Notes for Reviewers

1. **Code that doesn't run can still be correct** - Focus on the approach, not syntax errors
2. **Use your epidemiological judgement** - Some departures are context-dependent
3. **Be consistent** - Try to apply the same standards across all submissions
4. **Document uncertainty** - If you're unsure about a classification, note it
5. **You may use LLMs to help** - But the final assessment is your responsibility

## Questions?

Contact the study coordinators if you have questions about specific cases.
