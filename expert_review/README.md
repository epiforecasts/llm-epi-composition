# Expert Review Instructions

## Overview

You are reviewing code generated by large language models (LLMs) for estimating the time-varying reproduction number (Rt) from epidemic data. Your task is to assess the **epidemiological and statistical correctness** of each submission, regardless of whether the code actually runs.

**Important**: You are blinded to which LLM generated the code and which programming condition was used. Please do not attempt to identify these.

## Reference Solution

The reference approach uses the **renewal equation** framework:

### Infection Process
$$I_t = R_t \sum_{s=1}^{S} I_{t-s} \cdot g_s$$

Where:
- $I_t$ = infections at time $t$
- $R_t$ = instantaneous reproduction number
- $g_s$ = generation interval PMF

### Observation Process
$$\mathbb{E}[C_t] = \alpha_t \sum_{d=0}^{D} I_{t-d} \cdot f_d$$

Where:
- $C_t$ = observed cases
- $\alpha_t$ = ascertainment rate
- $f_d$ = delay PMF

### Observation Model
$$C_t \sim \text{NegBin}(\mu = \mathbb{E}[C_t], \phi)$$

### Rt Smoothness
Acceptable approaches include:
- AR(1): $\log R_t = \rho \log R_{t-1} + \epsilon_t$
- Random walk: $\log R_t = \log R_{t-1} + \epsilon_t$
- Gaussian process
- Splines

## Assessment Process

For each submission, complete the following:

### 1. Method Identification (Scenario 1a only)

For Scenario 1a (open method), identify which approach was used:

| Method | Rating | Notes |
|--------|--------|-------|
| Renewal equation / Cori / EpiEstim | **Recommended** | Accurate, uses only past data |
| Wallinga-Teunis | **Acceptable** | Uses future data, underestimates at end |
| Bettencourt-Ribeiro / SIR-based | **Not recommended** | Assumes exponential generation interval |
| Naive ratio ($R_t = C_t / C_{t-1}$) | **Not acceptable** | Ignores generation interval |
| Other | Describe and assess | |

### 2. List Departures from Reference

Document each departure from the reference solution. A "departure" is any difference in approach, not necessarily an error.

Example departures:
- "Uses Poisson instead of Negative Binomial observation model"
- "No delay distribution between infection and reporting"
- "Generation interval hardcoded as 5 days without uncertainty"
- "Missing convolution in renewal equation"
- "Prior on Rt allows negative values"

### 3. Classify Each Departure

| Category | Definition | Examples |
|----------|------------|----------|
| **(A) Equivalent alternative** | Different but equally valid | GP instead of AR(1) for Rt smoothness; different parameterization of same distribution |
| **(B) Minor error** | Small mistake, unlikely to substantially affect results | Slightly off generation interval mean (e.g., 4 vs 5 days); missing day-of-week adjustment |
| **(C) Major error** | Significant mistake that would bias results | No delay convolution; Poisson instead of NegBin with overdispersed data; overly tight priors |
| **(D) Fundamental misunderstanding** | Indicates lack of understanding | Naive ratio method; negative Rt values possible; confusing Rt with growth rate |

### 4. Summary Assessment

Provide an overall assessment:

| Rating | Criteria |
|--------|----------|
| **Acceptable** | No C or D departures; would produce reasonable Rt estimates |
| **Minor issues** | Only A and B departures; results would be slightly suboptimal |
| **Major issues** | One or more C departures; results would be biased |
| **Incorrect** | One or more D departures; fundamental misunderstanding |

## How to Review

1. **Open the spreadsheet**: Download `scoresheet.csv` and open in Excel or Google Sheets
2. **Open the code**: View `all_code.md` alongside (GitHub renders it, or open locally)
3. **For each row**: Find the matching submission ID in all_code.md, review the code, fill in the columns
4. **Return the completed spreadsheet** when done

### Column Dictionary

#### Pre-filled columns (do not edit)

| Column | Description |
|--------|-------------|
| `submission_id` | Unique identifier (e.g., SUB_042). Match to heading in all_code.md. |
| `scenario` | Which scenario: 1a, 1b, 2, or 3. See Scenario Descriptions below. |
| `execution` | Whether the code ran: SUCCESS (produced output), FAILED (error), or TIMEOUT (exceeded 10 min). |

#### Method identification (Scenario 1a only)

| Column | Description |
|--------|-------------|
| `method_1a_only` | Which Rt estimation method was used? Leave blank for scenarios 1b/2/3. |

Valid values:
- `renewal` - Renewal equation / Cori method / EpiEstim-style (recommended)
- `wallinga` - Wallinga-Teunis case reproduction number (acceptable)
- `bettencourt` - Bettencourt-Ribeiro SIR-based method (not recommended)
- `naive` - Simple ratio like Ct/Ct-1 (not acceptable)
- `other` - Describe in notes column

#### Departures from reference

| Column | Description |
|--------|-------------|
| `departures` | Brief description of each departure, separated by semicolons. E.g., "no delay distribution; Poisson not NegBin; fixed generation interval" |
| `count_A_equivalent` | Count of category A departures (different but equally valid approaches) |
| `count_B_minor` | Count of category B departures (small mistakes, unlikely to substantially affect results) |
| `count_C_major` | Count of category C departures (significant mistakes that would bias results) |
| `count_D_fundamental` | Count of category D departures (fundamental misunderstanding of the method) |

#### Overall assessment

| Column | Description |
|--------|-------------|
| `overall` | Summary judgement based on departure counts. |

Valid values:
- `acceptable` - No C or D departures; would produce reasonable Rt estimates
- `minor` - Only A and B departures; results would be slightly suboptimal
- `major` - One or more C departures; results would be biased
- `incorrect` - One or more D departures; fundamental misunderstanding

#### Additional criteria

| Column | Description |
|--------|-------------|
| `uncertainty_quantified` | Does the model provide credible/confidence intervals for Rt? (`yes` / `no`) |
| `appropriate_parameters` | Are generation interval (~3-7 days) and delay (~2-7 days) reasonable for COVID-19? (`yes` / `no` / `na` if not applicable) |
| `proper_discretisation` | Is continuous-to-discrete time conversion handled appropriately? (`yes` / `no` / `na` if not applicable) |
| `notes` | Any additional comments, clarifications, or uncertainties about your assessment. |

## Scenario Descriptions

### Scenario 1a - Open Method
"Estimate the time-varying reproduction number (Rt) from daily case counts."
- Assess method choice as well as implementation

### Scenario 1b - Renewal Equation Specified
"Estimate Rt using the renewal equation framework."
- Method is specified; assess implementation only

### Scenario 2 - Complex Model
"Estimate Rt accounting for day-of-week effects, time-varying ascertainment, and negative binomial observation noise."
- Assess whether all components are present and correctly implemented

### Scenario 3 - Multiple Data Streams
"Joint model of cases, hospitalisations, and deaths with stream-specific delays and shared Rt."
- Assess multi-stream handling and shared parameter structure

## Notes for Reviewers

1. **Code that doesn't run can still be correct** - Focus on the approach, not syntax errors
2. **Use your epidemiological judgement** - Some departures are context-dependent
3. **Be consistent** - Try to apply the same standards across all submissions
4. **Document uncertainty** - If you're unsure about a classification, note it
5. **You may use LLMs to help** - But the final assessment is your responsibility

## Questions?

Contact the study coordinators if you have questions about specific cases.
